<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Server Action: Productos por Marca -->
        <record id="dynamic_snippet_products_by_brand_action" model="ir.actions.server">
            <field name="name">Productos por Marca</field>
            <field name="model_id" ref="website_sale.model_product_template"/>
            <field name="state">code</field>

            <field name="code">
                brand_id = env.context.get("productBrandId")
                DynamicFilter = env["website.snippet.filter"]
                return DynamicFilter._get_products_by_brand(brand_id=brand_id, limit=16)
            </field>
        </record>

        <!-- Filtro dinÃ¡mico -->
        <record id="dynamic_filter_products_by_brand" model="website.snippet.filter">
            <field name="action_server_id" ref="conedera_theme_common.dynamic_snippet_products_by_brand_action"/>
            <field name="field_names">name</field>
            <field name="limit" eval="16"/>
            <field name="name">Productos por Marca</field>
            <field name="model_name">product.template</field>
        </record>

    </data>
</odoo>
